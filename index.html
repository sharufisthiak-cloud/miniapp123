<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tale Stars</title>
    <script src="https://telegram.org"></script>
    <style>
        body { font-family: sans-serif; background: #0f172a; color: #f8fafc; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; }
        .header { background: #1e293b; width: 100%; text-align: center; padding: 15px 0; border-bottom: 2px solid #7289da; }
        .tabs { display: flex; width: 95%; background: #1e293b; margin: 15px 0; border-radius: 10px; overflow: hidden; }
        .tab-btn { flex: 1; padding: 12px; border: none; background: none; color: #94a3b8; cursor: pointer; font-weight: bold; }
        .tab-btn.active { background: #7289da; color: white; }
        .container { display: none; width: 90%; text-align: center; }
        .container.active { display: block; }
        .card { background: #1e293b; padding: 20px; border-radius: 15px; margin-top: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .btn { background: #7289da; color: white; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: bold; margin-top: 15px; cursor: pointer; }
        input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; box-sizing: border-box; text-align: center; }
        #key-out { margin-top: 15px; padding: 10px; background: #000; color: #10b981; border-radius: 8px; font-family: monospace; display: none; word-break: break-all; }
        .support-btn { margin-top: 20px; color: #38bdf8; text-decoration: none; display: inline-block; font-size: 14px; border: 1px solid #38bdf8; padding: 8px 15px; border-radius: 20px; }
        .key-item { background: #0f172a; padding: 10px; border-radius: 8px; margin-top: 10px; text-align: left; font-size: 12px; border-left: 3px solid #7289da; }
    </style>
</head>
<body>

<div class="header">
    <h2 style="margin:0">TALE STARS</h2>
</div>

<div class="tabs">
    <button class="tab-btn active" id="t1" onclick="showTab('shop', 't1')">–ú–∞–≥–∞–∑–∏–Ω</button>
    <button class="tab-btn" id="t2" onclick="showTab('keys', 't2')">–ö–ª—é—á–∏</button>
    <button class="tab-btn" id="t3" onclick="showTab('act', 't3')">–ê–∫—Ç–∏–≤–∞—Ü–∏—è</button>
</div>

<div id="shop" class="container active">
    <div class="card" id="shop-card">
        <h3>–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á</h3>
        <p style="color:#94a3b8">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ 30 –¥–Ω–µ–π</p>
        <button class="btn" onclick="handleGenerate()">–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨</button>
        <div id="key-out"></div>
    </div>
</div>

<div id="keys" class="container">
    <div class="card">
        <h3>–í–∞—à–∏ –∫–ª—é—á–∏</h3>
        <div id="list">–ù–µ—Ç –∫–ª—é—á–µ–π</div>
    </div>
</div>

<div id="act" class="container">
    <div class="card">
        <h3>–ê–∫—Ç–∏–≤–∞—Ü–∏—è</h3>
        <input type="text" id="inp" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á">
        <button class="btn" onclick="handleActivate()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
    </div>
</div>

<a href="https://t.me" class="support-btn">üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞: @ddrrww133</a>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let myKeys = []; // –¢—É—Ç —Ö—Ä–∞–Ω–∏–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏

    function showTab(tabId, btnId) {
        document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.getElementById(btnId).classList.add('active');
        
        if(tabId === 'keys') renderKeys();
    }

    function handleGenerate() {
        const k = "TS-" + Math.random().toString(36).substr(2, 6).toUpperCase() + "-" + Math.random().toString(36).substr(2, 6).toUpperCase();
        myKeys.push(k);
        
        const out = document.getElementById('key-out');
        out.innerText = k;
        out.style.display = 'block';
        
        tg.HapticFeedback.impactOccurred('medium');
    }

    function renderKeys() {
        const div = document.getElementById('list');
        if(myKeys.length === 0) { div.innerText = "–ù–µ—Ç –∫–ª—é—á–µ–π"; return; }
        div.innerHTML = myKeys.map(k => `<div class="key-item">${k} <br> <small>–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤</small></div>`).join('');
    }

    function handleActivate() {
        const val = document.getElementById('inp').value.trim();
        
        if(myKeys.includes(val)) {
            tg.showAlert("‚úÖ –ö–ª—é—á –≤–µ—Ä–Ω—ã–π! –ß–∏—Ç Tale Stars –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.");
            document.getElementById('shop-card').innerHTML = "<h3>‚úÖ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–û</h3><p>–ü—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã!</p>";
            showTab('shop', 't1');
            tg.HapticFeedback.notificationOccurred('success');
        } else {
            tg.showAlert("‚ùå –û—à–∏–±–∫–∞: –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
            tg.HapticFeedback.notificationOccurred('error');
        }
    }
</script>

</body>
</html>
